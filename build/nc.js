#!/usr/bin/env node
const shell = require('shelljs');

let argv = require('minimist')(process.argv.slice(2));

shell.echo('');
shell.echo('    +------------------------+');
shell.echo('    | NC -- NetCreate Config |');
shell.echo('    +------------------------+');
shell.echo('');
shell.echo('    1. Setting dataset to "' + argv['_'] + '"...');

let script = '';
script += '// this file generated by NC command\n';
script += 'const NC_CONFIG = {\n';
script += '  dataset: "' + argv['_'] + '"\n';
script += '};\n';
script += 'if (typeof process === "object") module.exports = NC_CONFIG;\n';
script += 'if (typeof window === "object") window.NC_CONFIG = NC_CONFIG;\n';
let js = shell.ShellString(script).to('app/assets/netcreate-config.js');

shell.echo('    2. Starting dev server...');
shell.echo('');

shell.exec('npm run dev');
